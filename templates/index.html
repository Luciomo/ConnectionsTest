{% extends "base.html" %}

{% block title %}ReputaÃ§Ã£o de Sites {% endblock %}

{% block header %}
    <h1>Verifica URL Suspeita ğŸ›¡ï¸</h1>
    <p>Cole um link, domÃ­nio ou IP suspeito para verificar sua seguranÃ§a.</p>
{% endblock %}

{% block content %}
    <div style="text-align: center; margin-bottom: 20px;">
        <span style="font-size: 1em; color: #555;">Seu IP atual: <strong id="client-ip" style="color: #007bff;">Carregando...</strong></span>
    </div>

    {% if proxy_detected %}
        <div style="text-align: center; margin-bottom: 20px; padding: 10px; background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; border-radius: 5px;">
            âš ï¸ <strong>AtenÃ§Ã£o:</strong> Uso de Proxy ou VPN detectado via cabeÃ§alhos.
        </div>
    {% endif %}

    <form action="{{ url_for('check') }}" method="POST">
        <input type="text" name="url" placeholder="exemplo.com ou https://exemplo.com" required pattern=".*\S+.*" title="Por favor, digite um endereÃ§o vÃ¡lido (nÃ£o apenas espaÃ§os).">
        <button type="submit">Verificar Agora</button>
    </form>
    <!-- Exemplo: Links inferiores usando a classe nav-link -->
<div class="botoes-inferiores">
    <a href="{{ url_for('dns_page') }}" class="nav-link"> ğŸŒ Verificar DNS</a>
    <a href="{{ url_for('whois_page') }}" class="nav-link"> ğŸ‘¤ Verificar WHOIS</a>
    <a href="{{ url_for('connection_page') }}" class="nav-link"> ğŸš€ Teste ConexÃ£o</a>
    <a href="{{ url_for('email_page') }}" class="nav-link"> ğŸ“§ Verificar E-mail</a>
</div>

<div style="text-align: center; margin-top: 15px;">
    <span id="ipv6-badge" style="display:none; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; color: white; background-color: #28a745;">IPv6</span>
</div>

<script>
    fetch('/api/ping_pong')
        .then(response => response.json())
        .then(data => document.getElementById('client-ip').textContent = data.ip)
        .catch(err => document.getElementById('client-ip').textContent = "Desconhecido");

    fetch('https://api64.ipify.org?format=json')
        .then(r => r.json())
        .then(d => {
            if (d.ip.includes(':')) document.getElementById('ipv6-badge').style.display = 'inline-block';
        })
        .catch(e => console.log(e));
</script>
{% endblock %}
